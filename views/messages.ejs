<p>Stored XSS mode: <b><%= storedXss ? 'VULNERABLE (raw HTML)' : 'SAFE (escaped output)' %></b></p>

<% messages.forEach(m => { %>
  <article style="border:1px solid #ccc;padding:8px;margin-bottom:8px">
    <h3><%= escapeHtml(m.title) %></h3>
    <% if (storedXss) { %>
      <div><%- m.body %></div>
    <% } else { %>
      <div><%= escapeHtml(m.body) %></div>
    <% } %>
    <small><%= m.created_at %></small>
    <form method="post" action="/messages/delete" style="display:inline">
      <input type="hidden" name="id" value="<%= m.id %>">
      <button type="submit">Delete</button>
    </form>
  </article>
<% }) %>
